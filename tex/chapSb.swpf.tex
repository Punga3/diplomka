\chapter{$F=F_{tree}$}

\section{Basic observations}

\begin{exam}
Let \[\mathcal{G}_k=\{([k],E);\text{$E$ consists of exactly one $n/2$-clique}\},\] and $F=F_{tree}$.

We will prove that for every $t>\mathbb{N}$: 

\begin{align}
&\bbl\text{$\Gamma$ has an $n^{1/t}$-clique}\bbr\\
&=\bbl(\exists \Lambda)(\forall u)(\forall v)(((u,v \leq n^{1/t})\to\Gamma(\Lambda(u),\Lambda(v)))\land(\Lambda:[n^{1/t}]\hookrightarrow\mathcal{M}))\bbr\\
&=\Lor_\Lambda\Land_u\Land_v\bbl(u\not=v < n^{1/t})\to(\Gamma(\Lambda(u),\Lambda(v))\land\Lambda(u)\not=\Lambda(v))\bbr\\
&=\textbf{1}.
\end{align}

For $j\in[n^{1/t}]$ let $\Lambda_j$ to be a tree of depth $j\cdot (n^{1/t})^2$ which first tries to find an edge $1\leftrightarrow k$ for $k\in[n^{1/t}]$ if it fails than it tries to find $2\leftrightarrow k$ and so on. Once it finds some edge $(i,k)$, then it starts again but from $i+1$ until it finds the first $j$ elelements of $\Delta_\omega$ and responds with the $j$-th element. Since $j$ is always bounded by $n^{1/t}$, $\Lambda$ really sends $F$ to $F$.

\end{exam}

\begin{exam}
Let \[\mathcal{G}_k=\{([k],E);\text{$E$ consists of exactly one edge}\}\]
and $F=F_{tree}$.


\end{exam}

\begin{thrm}\label{thrmusbv}
Let $\varphi=(\forall \overline x)\varphi_0(\overline x)$ be a universal $\{E\}$-sentence, such that

\[\lim_{k\to\infty}\Pr_{G\in\mathcal{G}_k}(G\models\varphi)=1.\]

Then $\varphi$ is valid in the b.v. structure.


\end{thrm}

\begin{proof}

From $\aleph_1$-saturation of $\mathcal{M}$ and our assumption, we know that for each $m\in\mathbb{N}$ there exists a $k_0\in\mathbb{N}$ such that \[\mathcal{M}\models(\forall k>k_0)\left(\Pr_{G\in\mathcal{G}_k}(G\models \varphi)>1-1/m\right).\]
Therefore, since $n>\mathbb{N}$, we have that $\st(\Pr_{G\in\mathcal{G}_n}(G\models\varphi))=1$ and therefore $\bbl\varphi_0(\overline\alpha)\bbr=\1$ for each tuple $\overline\alpha$ in $F$.

Therefore
\begin{align}
\bbl\varphi\bbr&=\Land_{\overline\alpha}\bbl\varphi_0(\overline\alpha)\bbr\\
&=\Land_{\overline\alpha}\1\\
&=\1.
\end{align}
\end{proof}

\begin{thrm}\label{mutindfind}
Let $F=F_{tree}$. Let $\varphi_0(x_0,\dots,x_{l-1})$ be a q.f. $\{E\}$-formula. Let $0<p\leq 1$, consider subset $A\subseteq[g_k]^l$ such that for all $\overline a \in A$ 

\[\Pr_{G\in\mathcal{G}_k}(G\models \varphi_0(\overline a))\geq p\]

and

\[\text{$\{\{G\models\varphi_0(\overline a)\}\subseteq \mathcal{G}_k;\overline a \in A\}$ are mutually independent.}\]
moreover let $A_k$ be the set with the largest cardinality that  has this property.

If $\lim_{k\to\infty} \abs{A_k}=\infty$, then $\bbl(\exists \overline x)\varphi_0(\overline x)\bbr=\1$.
\end{thrm}

\begin{proof}
Let $\overline x = (x_0,\dots,x_{l-1})$. Let $T_{\overline a}$ be a tree of some standard depth $d$, that tests whether $G\models\varphi_0(\overline a)$.

From $\aleph_1$-saturation of $\mathcal{M}$ we have $n'>\mathbb{N}$ many tuples \(\overline a_0,\dots,\overline a_{n'-1}\in A_n\), such that \(\Pr_{G\in\mathcal{G}_k}(G\models\varphi_0(\overline a_i))\geq p\), we can assume $n'<n^{1/t_0}$ for some $t_0>\mathbb{N}$.


For $j\in[l]$ construct a tree $T_j$ inductively as follows: Start with $T_{\overline a_0}$. Replace the label of every accepting leaf by $(\overline a_0)_j$ and remove the label of every rejecting leaf. Call this tree $T_j^0$. Assume we have already constructed $T_j^{m}$. Construct $T_j^{i+1}$ by appending $T_{\overline a_{m+1}}$ to every undefined leaf, relabeling every satisfied leaf to $(\overline a_{i+1})_j$ and removing labels from every rejecting leaf. We will define $T_j$ as $T_j^{n'}$ with undefined leafs labeled by $0$. (This can be done, because all instances of induction are in $\Th(\mathbb{N})$.) Note that $\dpt(T_j)=d\cdot n' < n^{1/t}$ for some $t>\mathbb{N}$. 

Call $\overline \alpha$ the tuple computed by $T_0,\dots,T_{l-1}$. We will prove that probability of $\overline \alpha$ being a witness to $\varphi_0(\overline x)$ is 1. For each $\overline a_i$ we have, that the probability of $G\models\varphi_0(\overline a_i)$ is at least $p$. The mutual independence of ${\{G\models\varphi_0(\overline a_i);i\in[n']\}}$ and the construction of $T_j$ implies that $T_j$ has a probability of $(1-p)^{n'}$ of failing, which is obviously almost $0$.
\end{proof}

\begin{exam}
Let \[\mathcal{G}_k=\{([k],E);\text{$E$ has at least one edge, and can have a second one $0E1$}\},\]

and let $F=F_{tree}$. Then $\mu(\bbl(\exists x)(\exists y)\Gamma(x,y)\bbr)=\frac{1}{2}$.
\end{exam}
\begin{proof}
Let $T_0$ be a tree that always outputs $0$ and $T_1$ be a tree that always outputs $1$. We can prove that $\bbl\Gamma(0,1)\bbr\geq\bbl\Gamma(\alpha,\beta)\bbr$ for any $\alpha,\beta$. 
\end{proof}

\begin{exam}
Let \[\mathcal{G}_k=\{([k],E);\text{$E$ at least one edge, and may have exactly $k/2$ more from start}\}\]

and let $F=F_{tree}$. Then $\mu(\bbl(\exists x)(\exists y)\Gamma(x,y)\bbr)=\frac{1}{2}$.
\end{exam}

\begin{defi}
We say that $\{\mathcal{G}_k\}_{k=0}^\infty$ is \textbf{isomorphism closed}, if there is $k_0$ such that for every $k>k_0$ if we have that $G_1\in\mathcal{G}_k$, $V_{G_2}=[g_k]$ and $G_1\cong G_2$ then $G_2\in\mathcal{G}_k$.

We say that $\{\mathcal{G}_k\}_{k=0}^\infty$ is \textbf{categorical} if there is $k_0$ such that for every $k>k_0$ if we have $G_1,G_2\in\mathcal{G}_k$ then $G_1\cong G_2$. For a categorical sequence $\{G_k\}_{k=0}^\infty$ we denote $G_k$ the lexicographically minimal element of $\mathcal{G}_k$.
\end{defi}

\begin{lemm}
Let $\{\mathcal{G}_k\}_{k=0}^\infty$ be categorical and isomorphism closed, then for large enough $k$
\[\abs{\mathcal{G}_k}=\frac{g_k!}{\abs{\Aut(G_k)}}.\]
\end{lemm}
\begin{proof}
Every $\rho\in S_{g_k}$ defines an isomorphism $\rho:G_k\to\rho(G_k)$, where $\rho(G_k)$ is a graph obtained from $G_k$ by renaming every vertex $v$ to $\rho(v)$.

\textbf{Claim:} For any $\rho,\pi\in S_{g_k}$:
\[\rho(G_k)=\pi(G_k)\iff\exists \tau\in\Aut(G_k):\rho\circ\tau=\pi.\]
\textit{Proof of claim.} ``$\Rightarrow$" Let $\rho(G_k)=\pi(G_k)$, therefore $\tau:=\rho^{-1}\circ\pi\in\Aut(G_k)$ and $\rho\circ\tau=\rho\circ\rho^{-1}\circ\pi=\pi.$

``$\Leftarrow$" Let $\rho\circ\tau=\pi$. Then $\pi(G_k)=\rho(\tau(G_k))=\rho(G_k). \qedhere$

Notice that the $\tau$ in the statement of the claim is uniquely determinted by $\rho^{-1}\circ\pi$. Therefore if we defined a quotient set $S_{g_k}/\sim$ with $\rho\sim\pi\iff\rho(G_k)=\pi(G_k)$ then $\abs{S_{g_k}/\sim}=\frac{g_k!}{\abs{\Aut(G_k)}}$.

The Lemma follows from noticing that if we start with $\{G_k\}$ and then we build $\mathcal{G}_k$ by finding isomorphic graphs on the vertex set $[g_k]$ we can only do so by trying different permutation from $S_{g_k}$ and these permutations find the same graph if and only if they are in the same $\sim$-class. Therefore there is a bijection between $S_{g_k}/\sim$ and $\mathcal{G}_k$. \qed
\end{proof}

\begin{lemm}[Candidate for optimal search trees]
Let $\{\mathcal{G}_k\}_{k=0}^\infty$ be categorical and isomorphism closed, let $\varphi(x_0,\dots,x_{l-1})$ be an open $\{E\}$-formula, let $\models \varphi(\overline x) \to \Land_{i,j=0}^{l-1,l-1}x_i=^{b_{ij}}x_j$ for some $b_{ij}\in\{0,1\}$, let $k_0\geq0$ and define $\{q_k\}_{k=k_0}^\infty$ as follows

\[q_k:=\frac{g_k!}{\abs{\Aut(G_k)}}\cdot\frac{\abs{\varphi(G_k)}}{\abs{\bigcup_{G\in\mathcal{G}}\varphi(G_k)}}.\]

Then there is $c\in\mathbb{N}$ and trees $T_0,\dots,T_{l-1}$ of depth $n^{(r)} \cdot c$, (with $n^{(r)}$ being defined in the proof) such that for the $\overline \alpha$ computed by $\overline T$ we have $\bbl\varphi(\overline \alpha)\bbr=\1$.
\end{lemm}

\begin{proof}
We will use the identity from the statement to construct a search tree (iterated $T_{\overline a}$) which almost always finds a witness to $\varphi$.

We will analyze the problem in the finite case for big enough $k>0$. We should only check those tuples included in $\bigcup_{G\in\mathcal{G}_k}\varphi(G)$. For example, if we are trying to find an edge then we need not check the constant tuples $(a,a)$. Moreover, to succeed we only need to check one specific tuple in each $\varphi(G),G\in\mathcal{G}_k$.

Consider the set $S=\{(G,\overline a); G\in \mathcal{G}_k, G\models\varphi(\overline a)\}$ and a projection to the second coordinate $p_2: S\to\bigcup_{G\in\mathcal{G}_k}\varphi(G)$. Since $\abs{S}=\frac{g_k!}{\abs{\Aut(G)}}\cdot\abs{\varphi(G_k)}$ we have that $q_k$ is the average size of a $p_2$ preimage of any $\overline a\in \bigcup_{G\in\mathcal{G}_k}\varphi(G)$. 

\textbf{Claim:} For all $\overline a,\overline b\in\bigcup_{G\in\mathcal{G}_k}\varphi(G)$ we have $\abs{p_2^{-1}[\overline a]}=\abs{p_2^{-1}[\overline b]}=q_k$.

\textit{Proof of claim.} We will prove that for any $\overline a,\overline b\in\bigcup_{G\in\mathcal{G}_k}\varphi(G)$ we have $\abs{p_2^{-1}[\overline a]}\leq\abs{p_2^{-1}[\overline b]}$, by symmetry, they must be equal and also equal to $q_k$ which is the average size of any singleton preimage.

Let $p_2^{-1}[\overline a]=\{G_0,\dots,G_{s-1}\}\times\{\overline a\}$ and let $\rho=(b_0\: a_0)\dots(b_{l-1}\:a_{l-1})$, this is a permutation from the condition on $\varphi$. Then \[p_2^{-1}[\overline b]\supseteq\{\rho(G_0),\dots,\rho(G_{s-1})\}\times\{\rho(\overline a)=\overline b\}.\qed\] 

Now consider the multiset $M=(\bigcup_{G\in\mathcal{G}_k}\varphi(G),\text{count}:\overline a \mapsto \abs{p_2^{-1}[\overline a]})$, we will construct the searching tree by plucking elements from this multiset in the following way.

Let $M^{(0)}:=M,\mathcal{G}_k^{(0)}=\mathcal{G}_k$. For $i\geq0$ and $M^{(i)},\mathcal{G}_k^{(i)}$ built, take some $\overline a\in M^{(i)}$ with maximal $\text{count}(\overline a)$, put $\mathcal{G}_k^{(i+1)}=\mathcal{G}_k^{(i)}\setminus p_2^{-1}[\overline a]$ and form $M^{(i+1)}$ by removing $\overline a$, and for every $\overline b \in p_1[p_2^{-1}[\overline a]]\setminus\{\overline a\}$ setting $\text{count}_{M^{(i+1)}}(\overline b)=\max\{0,\text{count}_{M^{(i)}}(\overline b)-(\varphi(G_k))\}$. We also add $T_{\overline a}$ to the leaves of the tree we are constructing $T_i$ and call it $T_{i+1}$.

For each $i\geq 0$ we have that $T_i$ finds a witness in $G\in\mathcal{G}_k$ iff $G\not\in\mathcal{G}_k^{(i)}$. So to calculate the probability of success of $T_i$ we just need to find upper bounds on the cardinality of $\mathcal{G}_k^{(i)}$. 

Define $m_i:=\max\{\text{count}(\overline a);\overline a \in M^{(i)}\}$. Let $k^{(0)}\geq 0$ be the greatest number such that for all $i<k^{(0)}$: 
\(m_i=q_k.\) 

Define a set $M_m^{(i)}=\{\overline a;\text{count}_{M_i}(\overline a)=m_i\}$. We can see, that $k^{(0)}\geq1$ and $M^{(0)}=\bigcup_{G\in\mathcal{G}_k}\varphi(G)$. At each step $i<k^{(0)}$ we construct $T_{i+1}$ by searching for some $\overline a \in M_{m}^{(i)}$, this results in $\abs{\mathcal{G}_k^{(i+1)}}=\abs{\mathcal{G}_k^{i}}-q_k$. We also remove one instance of every $\overline b \in p_1[p_2^{-1}(\overline a)]\setminus\{\overline a\}$ from $M^{(i)}$ to form $M^{(i+1)}$, this results in $\abs{M^{(i+1)}_m}\geq \abs{M^{(i)}_m}-1-q_k\cdot(\abs{\varphi(G_k)-1}).$

Therefore 

\begin{align}
k^{(0)}&\geq \left \lfloor \frac{\abs{M^{(0)}_m}}{q_k\cdot\abs{\varphi(G_k)}} \right \rfloor\\
&=
\left\lfloor\frac{\abs{\bigcup_{G\in\mathcal{G}_k}\varphi(G)}}{q_k\cdot\abs{\varphi(G_k)}}\right\rfloor
,
\end{align}

and $\abs{\mathcal{G}_k^{(k^{(0)})}}=\abs{\mathcal{G}_k}-k^{(0)}\cdot q_k=\frac{\abs{\Aut(G_k)}}{g_k!}-\left\lfloor\frac{\abs{\cup_{G\in\mathcal{G}_k}\varphi(G)}}{q_k\cdot\abs{\varphi(G_k)}}\right\rfloor\cdot q_k\leq \frac{\abs{\Aut(G_k)}}{g_k!}-\left\lfloor\frac{\abs{\cup_{G\in\mathcal{G}_k}\varphi(G)}}{\abs{\varphi(G_k)}} \right \rfloor.$

However the right hand side of the last inequality is rarely $\leq 0$, so generally one has to continue with plucking even after $k^{(0)}$-many steps. We define $k^{(j)}$ as the greatest number such that for all $i<k^{(j)}:m_i\geq q_k-j$ and continue for $k^{(r)}$ steps, where $r$ is the smallest number such that


\begin{align}
\abs{\mathcal{G}_{k}^{k^{(r)}}}&=\abs{\mathcal{G}_k}-k^{(0)}\cdot q_k- \sum_{j=1}^{r}(k^{(j)}-k^{(j-1)})\cdot (q_k - j)\\
&=0.
\end{align}

However, this requires a general analysis of $k^{(j)}$ and I haven't manage to compute that.

For $k=n$ in $\mathcal{M}$ we put $n^{(r)}:=k^{(r)}.$
\end{proof}

\section{$\mathcal{G}_k=\text{ALL}_k$}

\begin{thrm}[Everything exists]
Let $\varphi(\overline x,\overline y)=\Land_{i=0}^{m-1}\psi_i(\overline x,\overline y)\land \Land_{i=0}^{l-1}\vartheta_i(\overline y)$, where $\psi_i,\vartheta_i$ are literals and $\psi_i$ are not of the form $(y_i=y_j)^b$, $E(y_i,y_j)^b$, $x_i\not= x_i$, $E(x_i,x_i)$, $b\in\{0,1\}$.

Let $\overline \beta$ be a tuple of vertices computed by $F_{tree}$ of the same length as $\overline y$. Then $\bbl(\exists \overline x)\varphi^\Gamma(\overline x,\overline \beta)\bbr=\bbl\Land_{i=0}^{l-1}\vartheta_i(\overline \beta)\bbr$, specifically if $l=0$ then $(\exists \overline x)\phi_0(\overline x,\overline \beta)$ is valid in the b.v. graph.
\end{thrm}
\begin{proof} We will construct one tree $T$ computing the whole tuple of witnesses $\overline \alpha$, such a construction can be straightforwardly split into a tuple of tree each computing the specific element.

First we concatenate all the trees used to compute $\overline \beta$. At each leave we can now proceed knowing the value of $\overline \beta$ at the specific $\omega\in\Omega$. Now we just construct a tree as in Theorem \ref{mutindfind} but searching only over edges not checked previously and only to fulfill each $\psi_i$. Luckily we have so far searched only an infinitesimal part of the edges and since we assume $\mathcal{G}_k=\text{ALL}_k$ both of the conditions of the theorem are satisfied, so by analogous argument, we have a tree that finds a witness all of the $\psi_i(\overline x,\overline \beta)$ with probability infinitesimally close to 1.

Therefore
\begin{align}
\bbl(\exists \overline x)\varphi^\Gamma(\overline x,\overline \beta)\bbr&=\bbl(\exists \overline x)\Land_{i=0}^{m-1}\psi_i(\overline x,\overline \beta)\bbr \land \bbl\Land_{i=0}^{l-1}\vartheta_i(\overline \beta)\bbr\\
&=\bbl\Land_{i=0}^{l-1}\vartheta_i(\overline \beta)\bbr.
\end{align}
\end{proof}

\begin{crll}
For each $\varphi(\overline x)$ that is not a tautology in the theory of graphs we have that $\bbl(\forall \overline x)\varphi^\Gamma(\overline x)\bbr=\0$.
\end{crll}
\begin{crll}
For each $\varphi(\overline x,\overline y)$ that is not falsifiable by $\overline y$ in the theory of graphs we have that $\bbl(\forall \overline y)(\exists \overline x)\varphi^\Gamma(\overline x)\bbr=\1$.
\end{crll}

\chapter{$F=F_{nbtree}$}

\section{$\mathcal{G}_k=*\text{PATH}_k$}

\begin{defi}
We define $\pPATH_k$ (the pointed paths on $k$ vertices) as the set of all (undirected) graphs $G$ on the vertex set $[k]$, where $G$ is isomorphic to the path on $n$ vertices and $\deg_G(0)=1$.
\end{defi}

\begin{defi}
After we fix $n$, we define $F_{nbtree}$ as the set of all functions computed by some some labeled tree with the following shape:

\begin{itemize}
\item Each non-leaf node is labeled by some $v\in[n]$. 
\item For each $\{u,v\} \subseteq [n]$ and a node $N$ there is an outgoing edge from $N$ labeled $A$.
\item Each leaf is labeled by some $m\in \mathcal{M}_n$.
\item The depth of the tree is at most $n^{1/t}$ for some $t>\mathbb{N}$.
\end{itemize}

Computation of such a tree on a undirected graph $G$ goes as follows. We interpret the non-leaf nodes as questions "what is the neighbour set of $v$?" and the edges as answers from our graph $G$, and thus we follow a path determined by $G$ until we find a vertex for which the answer is not an edge (in which case the computation returns $0$) or until we find a leaf, in which case the computation returns the label of the leaf.
\end{defi}

We now shift out focus to analysing the ability of trees from $F_{nbtree}$ to find the non-zero degree 1 vertex in $G\in \pPATH_n$. We say a tree $T\in F_{nbtree}$ fails at a graph $G$ if $T(G)$ is not a non-zero vertex of degree one in $G$.

\begin{defi}
Let $m\leq n$ and $v\in [w]$ and $U\subseteq [w]$ with $\abs{U}\leq 2$, then we define 

\[\mathcal{G}_m^{v?=U}:=\{G\in\mathcal{G}_m;N_G(v)=U\},\]
where $N_G$ is the neighbour-set function of $G$.
\end{defi}
\begin{lemm}
There are bijections for all nonstandard $m\leq n$ and distinct $u,v,w\in [m]\setminus\{0\}$:

\begin{align}
\mathcal{G}_m^{v?=\{u,w\}}&\cong\mathcal{G}_{m-2}\times [2] \label{pPathfirstbij}\\
\mathcal{G}_m^{v?=\{u,0\}}&\cong\mathcal{G}_{m-2}\label{pPathsecbij}\\
\mathcal{G}_m^{0?=\{u\}}&\cong\mathcal{G}_{m-1}\label{pPaththrdbij}.
\end{align}
\end{lemm}
\begin{proof} (sketch)
For \eqref{pPathfirstbij} we can just contract all of {u,v,w} into one vertex and relabel the rest of the graph, leaving the orientation as a one remaining bit of information. This is obviously reversible and a bijection.

For \eqref{pPathsecbij} we can do the same, but the orientation is given by $0$.
\end{proof}

\begin{lemm}\label{lemmrelabeltree}
Let $T\in F_{nbtree}$, with root labeled $v\in[m]\setminus{0}$, we have for each $T_{v?=\{u,w\}}$ a tree $\tilde T_{v?=\{u,w\}}$ of the same depth, such that
\begin{align}
P_m(T_{v?=\{u,w\}}\text{ fails}|v?=\{u,w\})=P_{m-2}(\tilde T_{v?=\{u,w\}}).
\end{align}
For a tree $T$ with the root labeled $0$, we have a tree $\tilde T_{v?=\{u,w\}}$ of the same depth, such that
\begin{align}
P_m(T_{v?=\{u\}}\text{ fails}|v?=\{u\})=P_{m-1}(\tilde T_{v?=\{u\}}).
\end{align}
\end{lemm}
\begin{proof}(sketch) To construct the tree, we just replace all vertices in labels of $T_{v?=\{u,w\}}$ by there renumbering from the bijection in \eqref{pPathfirstbij}.

(TODO: Elaborate) One can then check that the trees $T_{v?=\{u,w\}}$ and $\tilde T_{v?=\{u,w\}}$ are isomorphic in a sense that their computation of a graph $G$ and $\tilde G$ respectively, $\tilde G$ being the corresponding $(m-2)$-vertex graph, agree with the structure of the path and that correctness of leaves is preserved under the renumbering. Essentially they emulate the same computation but on a smaller graph.
\end{proof}


\begin{lemm}
For all nonstandard $t>\mathbb{N},m\geq n-2n^{1/t}$ and $k\in [n^{1/t}+1]$ for all trees $T\in F_{nbtree}$ of depth $k$ we have
\[
P_m(\text{$T$ fails})\geq \prod_{i=0}^k\left (1-\frac{2}{m-2i-2}\right ).
\]
\end{lemm}
\begin{proof}
We proceed by induction on $k$. 

$k=0:$ We have that the probability of success of a straight guess is at most $\frac{1}{m-1}$. Therefore

\begin{align}
P(\text{$T$ fails})\geq \left (1-\frac{1}{m-1}\right ) \geq \left(1-\frac{2}{m-2}\right).
\end{align}

$(k-1) \Rightarrow k:$ First we assume that the root is labeled $0$. Then we have 

\begin{align}
P(\text{$T$ fails})&=\sum_{u\in V\setminus\{0\}}P_{m-1}(0Eu)P_{m-1}(T_{0?=\{u\}}\text{ fails}|0Eu)\\
&\geq P_{m-1}(T_{0?=\{u\}}\text{ fails}|0Eu)\\
&= P_{m-1}(\tilde T_{0?=\{u\}}\text{ fails})\\
&\geq \prod_{i=0}^{k-1}\left(1-\frac{2}{m-2i-2}\right)\\
&\geq \prod_{i=0}^{k}\left(1-\frac{2}{m-2i-2}\right).
\end{align}

Now we assume that the root is labeled $v\not= 0$. First we notice that

\begin{align}
P_m(vE0)&=\frac{1}{m-1}\\
P_m(N(V)=1)&=\frac{1}{m-1}\\
P_m(\abs{N(V)\setminus\{0\}}=2)&=1-\frac{2}{m-1},\label{pmmiddle}
\end{align}
the first two probabilities are obviously $\frac{1}{m-1}$ because they correspond to $v$ being positioned on one of the ends of the non-zero segment which has length $m-1$. The event in \eqref{pmmiddle} is the complement of the union of the first two events, which have empty intersetion, giving us that stated probability.

Then we have
\begin{align}
P_m(\text{$T$ fails})&=P_m(vE0)P_m(\text{$T$ fails}|vE0)\\
&\:\phantom{=}\:+P_m(\abs{N(v)\setminus\{0\}}=2)P_m(\text{$T$ fails}|\abs{N(v)\setminus\{0\}}=2)\\
&\:\phantom{=}\:+P_m(\abs{N(v)}=1)P_m(vE0)P_m(\text{$T$ fails}|\abs{N(v)}=1)\\
&\geq P_m(\abs{N(v)\setminus\{0\}}=2)P_m(\text{$T$ fails}|\abs{N(v)\setminus\{0\}}=2)\\
&\geq (1-\frac{2}{m-1})\\
&\:\phantom{=}\:\cdot\sum_{\substack{u,w\in V\setminus \{0\} \\ u\not= w}}P_m(v?=\{u,w\})P_m(T_{v?=\{u,w\}}\text{ fails}|v?=\{u,w\})\\
&\geq(1-\frac{2}{m-1})P_m(T_{v?=\{u_0,w_0\}}\text{ fails}|v?=\{u_0,w_0\})\label{pmfailchoice}\\
&\geq(1-\frac{2}{m-1})P_{m-2}(\tilde T_{v?=\{u_0,w_0\}}\text{ fails})\label{pmfaillemma}\\
&\geq(1-\frac{2}{m-1})\prod_{i=0}^{k-1}(1-\frac{2}{m-2i-4})\label{pmfailih}\\
&\geq(1-\frac{2}{m-2})\prod_{i=1}^{k}(1-\frac{2}{m-2i-2})\\
&\geq\prod_{i=0}^{k}(1-\frac{2}{m-2i-2}).
\end{align}
where in \eqref{pmfailchoice} we choose $u_0,w_0$ with the lowest value of \[P_m(\text{$T_{v?=\{u_0,w_0\}}|v?=\{u_0,w_0\}$}),\] the bound follows the fact that all $P_m(v?=\{u,w\})$ are the same for distinct non-zero $u,w$. In \eqref{pmfaillemma} we use the lemma \ref{lemmrelabeltree} and in \eqref{pmfailih} we use the induction hypothesis.
\end{proof}

\begin{crll}\label{crllpPathtreefail}
For a tree $T\in F_{nbtree}$ we have that
\[P_n(T\text{ fails})\approx 1.\]
\end{crll}
\begin{proof}
Since $T$ has depth at most $n^{1/t}$ for some $t>\mathbb{N}$ we by the previous lemma that
\begin{align}
P_n(\text{$T$ fails})&\geq \prod_{i=0}^{n^{1/t}}\left(1-\frac{2}{n-2i-2}\right)\\
&\geq \left(1-\frac{2n^{1/t}}{n-2n^{1/t}-2}\right)\\
&\approx 1.
\end{align}
\end{proof}

Finally we can prove the following theorem.

\begin{thrm}
\[\bbl(\exists v)(\exists u)(\forall w)((v\not=0)\land (\Gamma(v,u)) \land(\Gamma(v,w) \to u=w))\bbr=\0\]
\end{thrm}
\begin{proof}
Expanding the value of the formula in the statement we get
\[\Lor_{\alpha}\Lor_{\beta}\Land_{\gamma}\bbl(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land(\Gamma(\alpha,\gamma) \to \beta=\gamma)\bbr,\]
to prove it evalues to $\0$ we need to find for every $\alpha,\beta$ some $\gamma$ such that
\[\bbl(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land(\Gamma(\alpha,\gamma) \to \beta=\gamma)\bbr=\0.\]
For any $\alpha,\beta$ we define
\[\gamma(\omega):=\begin{cases}v&N(\alpha(\omega))=\{v\}\\w&w\in N(\alpha(\omega))\setminus\{\beta(\omega)\},\end{cases}\]
such a function can be computed by a tree in $F_{nbtree}$ which we can construct by concatenation of trees computing $\alpha$ and $\beta$.

Let $T$ be the tree computing $\alpha$. Now we proceed by contradiction, let
\[\epsilon:=\mu(\bbl(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land(\Gamma(\alpha,\gamma) \to \beta=\gamma)\bbr)>0,\]
by definition this means that
\[\epsilon=\st(P_n[(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land(\Gamma(\alpha,\gamma) \to \beta=\gamma)])>0.\]
But by definition of $\gamma$ and Corollary \ref{crllpPathtreefail} we have
\begin{align*}
0&<\epsilon\\
&=\st(P_n[(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land(\Gamma(\alpha,\gamma) \to \beta=\gamma)])\\
&\leq\st(P_n[(\alpha\not=0)\land (\Gamma(\alpha,\beta)) \land \abs{N(\alpha)}=1])\\
&\leq\st(P_n[(\alpha\not=0)\land \abs{N(\alpha)}=1])\\
&=\st(P_n[T\text{ does not fail}])\\
&=0.
\end{align*}
A contradiction.
\end{proof}
