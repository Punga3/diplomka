\chapter{Dense case}\label{chapdense}

\section{$\G_k=\SK_k^{1/2}$}

Now we turn to analyze dense wide sequences in the second order case; that is the case when we shall be interested in second order properties of the wide limit. In this chapter we assume $F=F_{rud}$ and $G=G_{rud}$. Specifically we will consider the problem of finding a large clique in a graph. 

Generally it is considered a computationally hard problem to find a large clique in a graph. It is an $\NP$-hard problem and thus it is conjectured that it cannot be solved in polynomial time. We first turn to the following wide sequence.

\begin{defi}
Let \[\SK_k^{1/2}=\{(\set{k},E);\text{$E$ consists of exactly one $k/2$-clique}\}.\]
\end{defi}

Limiting inputs to $\SK_k^{1/2}$ makes the problem less complex, because for a vertex $v$ to be a part of the biggest clique it is enough that it has nonzero degree. Naturally we want to see whether there is a large clique in $\lim_F^G \SK_n^{1/2}$, every sample has a clique of size $n/2$, but is there a set of $F$-vertices witnessing that? 

Here to measure the size of such a clique, the second order wide limit  by itself is not a sufficient object. Instead we need to turn to the arithmetical expansion $K(\G_n,F,G)$ to find an injective function from some large initial segment into a clique in the graph $\Gamma$. It is not hard to prove the following result.

\begin{thrm}\label{thrmsk1}For every $t>\N$ we have
\[K(\SK_k^{1/2},F,G)\bbl\text{$\Gamma$ has a clique of size $n^{1/t}$}\bbr=\1.\]

\end{thrm}

\begin{proof}(Sketch) We need to analyze the value
\begin{align}
&\bbl(\exists \Lambda)(\forall u)(\forall v)(((u\not = v \leq n^{1/t})\to\Gamma(\Lambda(u),\Lambda(v)))\land(\Lambda:[n^{1/t}]\hookrightarrow\mathcal{M}))\bbr
\end{align}
which is equal to
\begin{align}
\Lor_\Lambda\Land_u\Land_v\bbl(u\not=v < n^{1/t})\to(\Gamma(\Lambda(u),\Lambda(v))\land\Lambda(u)\not=\Lambda(v))\bbr.
\end{align}
So we want to find some $n^{1/t}$-tuple of trees computing some $\Lambda$ which is injective on $\set{n^{1/t}}$ and its $\set{n^{1/t}}$ range is a clique in $\Gamma$.

(!!!) We define $(\Lambda_0,\dots,\Lambda_{n^{1/t}-1})$ as follows. The tree $T_0$ computing $\Lambda_0$ inspects all the edges $(u,v)\in\set{n^{1/t}}\times\set{n^{1/t}}$ in some specified order and outputs the first vertex it finds with an edge. The tree $T_i$ computing $\Lambda_i$ extends $T_{i-1}$ by not outputting the $i$-th vertex with the property but instead continues inspecting and outputs the $(i+1)$-th vertex for which it finds an edge. Also every such tree has depth at most $n^{1/t}\cdot n^{1/t}=n^{2/t}=n^{1/(t/2)}$.

One can check that the probability the tree $\Lambda_i$ does not find $i$ vertices with an edge is infinitesimal and therefore it always outputs a vertex in the clique of $\omega$. Moreover, every $\Lambda_i$ outputs the $i$-th element element of the ordering and thus it is injective.
\end{proof}

At first glance the lower bound $n^{1/t}$ for every nonstandard $t$ may seem optimal given the proof method we used, but there is a way to radically improve it. The idea is to partition the set of vertices into many smaller ones and let $\Lambda_i$ search only in the $i$-th set. First we need the following lemmas.

\begin{lemm}\label{lemmmiss}
Let $S\subseteq \set{n}$ such that $\abs{S}=m > \N$, then
\[\st\left(\Pr_{G\in\G_n}[\text{$S$ contains no vertices in the clique of $G$}]\right)=0.\]
\end{lemm}
\begin{proof}
There are $\binom{n-m}{\floor{\frac{n}{2}}}$ different graphs in $\SK_n^{1/2}$ in which the clique does not intersect $S$. We then bound the probability as
\begin{align}
\frac{\binom{n-m}{\floor{\frac{n}{2}}}}{\binom{n}{\floor{\frac{n}{2}}}}&=\frac{(n-m)!(n-\floor{\frac{n}{2}})!}{(n)!(n-\floor{\frac{n}{2}}-c)!}\\
&=\prod_{i=0}^{m-1}\frac{(n-i-\floor{\frac{n}{2}})}{(n-i)}\\
&=\prod_{i=0}^{m-1}\left(1-\frac{\floor{\frac{n}{2}}}{n-i}\right)\\
&\leq \left(1-\frac{\floor{\frac{n}{2}}}{n}\right)^m\\
&\leq \left(1-\frac{\floor{\frac{n}{2}}}{n}\right)^{n \cdot \frac{m}{n}}\\
&\leq e^{-\floor{\frac{n}{2}}\frac{m}{n}}.
\end{align}
But $\floor{\frac{n}{2}} \frac{m}{n}$ is infinite therefore the bound is infinitesimal.
\end{proof}

\begin{lemm}\label{lemmfindtree}
Let $a\in\M$, let $v_0,\dots,v_{a-1}\in \set{n}$ distinct vertices, then there exist trees $T_{v_i}$ such that
\[\st\left(\Pr_{\omega\in\Omega}[\forall i: (v_i,T_{v_i}(\omega))\in E_\omega|\forall i: \text{$v_i$ is in the clique}]\right)=1.\]
\end{lemm}

\begin{proof}
The tree $T_{v_i}$ inspects all the edges $(v_i,j)$ where $j$ ranges over $\set{n^{1/t}}$ for some $t>\N$ and outputs $j$ if $(v_i,j)\in E_\omega$. By Lemma \ref{lemmmiss} we have that only an infinitesimal number of graphs have their clique not intersect $\set{n^{1/t}}$ so each $T_{v_i}$ succeeds on all but an infinitesimally small portion of $\Omega$. But if one $T_{v_i}$ finds a neighbour of $v_i$, then all do, since nonzero degree vertices in every $\omega$ form a clique and the same $w\in\set{n^{1/t}}$ is a neighbour of all $v_i$s.
\end{proof}

\begin{lemm}\label{lemmmiss2}
Let $S_0,\dots,S_{a-1}\subseteq\set{n}$ sets of size $a\in \M$ for $i\in \M$ then
\[\Pr_{\omega\in\Omega}\left[\bigcup_{i=0}^{a-1}[\text{$S_i$ contains no vertices in the clique of $\omega$}]\right]\leq a\cdot e^{-\floor{\frac{n}{2}}\frac{m}{n}}.\]
\end{lemm}
\begin{proof}Follows from the proof of Lemma \ref{lemmmiss} and union bound.
\end{proof}

Now we are ready to improve on Theorem \ref{thrmsk1}.

\begin{thrm}\label{thrmsk}
Let $m = 2 \ln n$. Then
\[K(\SK_k^{1/2},F,G)\bbl\text{$\Gamma$ has a clique of size $\floor{n/m}$}\bbr=\1.\]
\end{thrm}
\begin{proof}
Partition a subset of $\set{n}$ to sets $S_{0},\dots,S_{\floor{n/m}-1}$ each of size at least $m$. Specifically if $m$ divides $n$ then we partition the whole $\set{n}$.

By Lemma \ref{lemmmiss2} we have that with probability that we do not sample $\omega$ which have the clique intersect all $S_i$s 
\begin{align}
\floor{\frac{n}{m}}\cdot e^{-\floor{\frac{n}{2}}\frac{m}{n}} = e^{\ln\floor{\frac{n}{m}}-\floor{\frac{n}{2}}\frac{m}{n},}\label{eqpr}
\end{align}
we can bound the exponent as
\begin{align}
\ln\floor{\frac{n}{m}}-\floor{\frac{n}{2}}\frac{m}{n}&\leq\ln\frac{n}{m}-\frac{n}{2}\cdot\frac{m}{n}+\frac{m}{n}\\
&\leq\ln n - \ln m - \frac{m}{2} + \frac{m}{n}1\\
&\leq \ln n - \ln \ln n - \ln n+\frac{2\ln n}{n}\\
&\leq - \ln \ln n + \frac{2\ln n}{n}
\end{align}
which is negative and infinite, because $\frac{\ln x}{x}\overset{x\to \infty}{\to} 0$ as  and therefore \eqref{eqpr} is infinitesimal.

So with probability infinitesimally close to 1 we have in each $S_i$ a vertex $v_i$ which is also a part of the clique. By Lemma \ref{lemmfindtree} we have that there exists a tree verifying whether a given vertex is in the clique and since $m\leq n^{1/t}$ for some $t$ we can concatenate the trees to get a tree $T_{S_i}$ which finds in $S_i$ an element of the clique with probability infinitesimally close to $1$.

Finally we can have a function $\Lambda\in G$ computed by $(\Lambda_0,\dots,\Lambda_{\floor{n/m}-1})$ by letting $\Lambda_i$ be computed by $T_{S_i}$ we have already verified $\bbl\Lambda\text{ is a clique}\bbr=\1.$

Because $T_{S_i}(\omega)\in S_i$ when $S_i$ succeeds, and $S_i$ are disjoint we have \[\bbl\Lambda:\set{\floor{n/m}}\xhookrightarrow{} \M\bbr=\1. \]
Which proves the theorem.
\end{proof}

One can also check that for $\SK_{k}^{1/l}$, the graphs whose edges are exactly one $\floor{k/l}$ clique for some $l\in \N$, the wide limit has a clique of size $\floor{n/m}$ for $m=l\cdot \ln(m)$ by the same technique.

Even though the size of the clique has radically increased, we still did not find a clique in $\Gamma$ of size $n/2$. One can verify that with the method provided one cannot obtain such a clique because the probability that any of $\floor{n/2}$ two-element sets does not intersect the clique is too large. 

\begin{ques}
Is $\floor{n/(2\ln n)}$ the clique number in the Boolean valued graph $\lim_{F_{rud}}^{G_{rud}}\SK_n^{1/2}$, measured in $K(\SK_k^{1/2},F,G)$?
\end{ques}


\section{$\G_k=\CK_k^{1/2}$}

Now let us mention the more complex case of the wide sequence $\CK_k^{1/2}$
\[\CK_k^{1/2}=\{(\set{k},E);E\text{ contains a $\floor{k/2}$ clique.}\}\]

We are still guaranteed that every $\omega$ contains a large clique, but there is no easy way to check whether a given vertex $v$ is contained in the large clique. To prove the following theorem we can use that $\CK_k^{1/2}$ is isomorphism closed to translate the case for $\SK_k^{1/2}$ at least for the case of cliques of standard size.

\begin{thrm}\label{thrmck}
Let $c\in\N$ then 
\[K(\CK_k^{1/2},F,G)\bbl\text{$\Gamma$ has a clique of size $c$}\bbr>\0.\]
\end{thrm}
\begin{proof}
Consider the set \[\G_n^+=\{(G,U);\text{$G\in \G_n$ and $U\subseteq \set{n}$ is a $\floor{n/2}$ clique in $G$ }\}\]
and projections
\begin{align*}
\pi_1:\G_n^+&\to\G_n,(G,U)\mapsto G.\\
\pi_2:\G_n^+&\to\Po(\set{n}),(G,U)\mapsto U
\end{align*}

From the fact that $\CK_k^{1/2}$ is isomorphism closed, we have that $\abs{\pi_2^{-1}[U_1]}=\abs{\pi_2^{-1}[U_2]}$. We will set $\nu:=\abs{\pi_2^{-1}[U]}$ for some clique $U$ of size $\floor{n/2}$ so we have $\nu\abs{\G_n}=\G_n^+$. Let $\varphi_c(\overline x)$ be a $\{E\}$-sentence is satisfied iff $\overline x$ is a $c$ sized clique.  Denote an event in the sample space $\G_n$
\[A_{\overline a} :=\{G\in\G_n;G\models \varphi_c(\overline a)\}.\]
and in the sample space $\G_n^+$
\[A_{\overline a}^+ :=\{(G,U)\in\G_n^+;\overline a\text{ is a subclique of $U$}\}\]
notice that if $(G,U)\in A_{\overline a}^+$ then $G\in A_{\overline a}$ which implies (by another argument with projections) that
\[\nu\cdot\abs{A_{\overline a}}\geq \abs{A_{\overline a}^+}\]
so in conjunction with Example \ref{examskhalf} we have
\begin{align*}
\Pr_{G\in\G_n}[A_{\overline a}]&\geq \frac{\abs{A_{\overline a}^+}}{\abs{\G_n^+}}\\
&= \Pr_{G\in\SK_{k}^{1/2}}[\overline a \text{ is in the clique}]\\
&>(1/2)^c
\end{align*}
and since $c$ is constant we have $\Pr_{G\in\G_n}[A_{\overline a}]>0$.
\end{proof}

Of course it remains to show that using trees can actually increase the value all the way to $\1$, we did not get to prove that.

Finally one can return to cliques of nonstandard size and intuitively one expects this to be hard. For a clique of size greater than $n^{1/t}$ for any $t>\N$ one has to check more than $n^{1/t}$ edges to even know whether a given set is a clique and the counting argument used in the previous theorem implies that just guessing the clique of nonstandard size is not enough. We therefore present the following conjecture.

\begin{conj}
Let $m\leq c \ln n$ for any $c\in\N$, then
\[K(\CK_k^{1/2},F,G)\bbl\text{$\Gamma$ has a clique of size $\floor{n/m}$}\bbr=\0.\]
\end{conj}
